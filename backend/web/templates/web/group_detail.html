{% extends 'web/base.html' %}
{% block title %}Group â€¢ {{ group.name }}{% endblock %}
{% block content %}
  <div class="card">
    {% if group.cover %}
      <div style="width:100%; max-height:240px; overflow:hidden; border-radius:12px; border:1px solid #eee; margin-bottom:12px;">
        <img src="{{ group.cover.url }}" alt="{{ group.name }} cover" style="width:100%; height:100%; object-fit:cover;">
      </div>
    {% endif %}
    <h2>{{ group.name }}</h2>
    {% if request.user == group.owner %}
      <p><a class="btn" href="{% url 'group_invite' group.pk %}">Create Invite Link</a></p>
      <p><a class="btn secondary" href="{% url 'manage_members' group.pk %}">Manage Members</a></p>
    {% endif %}
    <p class="muted">{{ group.description|default:'No description' }}</p>
    <p><a class="btn secondary" href="{% url 'group_edit' group.pk %}">Edit</a>
       <a class="btn danger" href="{% url 'group_delete' group.pk %}">Delete</a></p>
  </div>
  <div class="card">
    <h3>Members</h3>
    <ul>
      <li><strong>Owner:</strong> {{ group.owner.username }}</li>
      {% for m in memberships %}
        <li>{{ m.user.username }} <span class="muted">({{ m.role }})</span></li>
      {% empty %}
        <li class="muted">No members yet.</li>
      {% endfor %}
    </ul>
  </div>
  <div class="card">
    <h3>Posts</h3>
    <ul>
      {% for p in group.posts.all %}
        <li><a href="{% url 'post_detail' p.pk %}">{{ p.caption|truncatechars:60 }}</a> <span class="muted">by {{ p.author.username }}</span></li>
      {% empty %}
        <li class="muted">No posts yet.</li>
      {% endfor %}
    </ul>
    <p><a class="btn" href="{% url 'post_create' %}?group={{ group.pk }}">New Post</a></p>
  </div>
{% endblock %}
