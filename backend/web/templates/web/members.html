{% extends 'web/base.html' %}
{% block title %}Manage Members • {{ group.name }}{% endblock %}
{% block content %}
  <div class="card">
    <h2>Manage Members — {{ group.name }}</h2>
    <p class="muted">Owner: {{ group.owner.username }}</p>
    <table class="table">
      <thead>
        <tr><th>User</th><th>Role</th><th>Actions</th></tr>
      </thead>
      <tbody>
        {% for m in memberships %}
          <tr>
            <td>{{ m.user.username }}</td>
            <td>{{ m.role }}</td>
            <td>
              <form method="post" style="display:inline-block;">{% csrf_token %}
                <input type="hidden" name="user_id" value="{{ m.user.id }}" />
                <input type="hidden" name="action" value="remove" />
                <button class="btn danger" onclick="return confirm('Remove {{ m.user.username }}?');">Remove</button>
              </form>
              <form method="post" style="display:inline-block; margin-left:6px;">{% csrf_token %}
                <input type="hidden" name="user_id" value="{{ m.user.id }}" />
                <input type="hidden" name="action" value="role" />
                <select name="role">
                  <option value="member" {% if m.role=='member' %}selected{% endif %}>member</option>
                  <option value="moderator" {% if m.role=='moderator' %}selected{% endif %}>moderator</option>
                </select>
                <button class="btn secondary">Update</button>
              </form>
            </td>
          </tr>
        {% empty %}
          <tr><td colspan="3" class="muted">No members yet.</td></tr>
        {% endfor %}
      </tbody>
    </table>
    <p><a class="btn" href="{% url 'group_detail' group.pk %}">Back to Group</a></p>
  </div>
{% endblock %}

